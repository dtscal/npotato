@{
    ViewBag.Title = "Product";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var language = HttpContext.Current.Session["isCN"];
    var isCN = language == null || language.ToString() != false.ToString();
    var a = (Domain.Article)this.ViewData["entity"];
}
@section home{
    <!-- start details -->
    <link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/productviewgallery.css")" media="all" />
    <link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/pinfen.css")"/>
    <script type="text/javascript" src="@Url.Content("~/Scripts/cloud-zoom.1.0.3.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery.fancybox.pack.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery.fancybox-buttons.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery.fancybox-thumbs.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/productviewgallery.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery.form.js")"></script>
    <!-- start top_js_button -->
    <script type="text/javascript">

        jQuery(document).ready(function($) {
            $(".scroll").click(function(event) {
                event.preventDefault();
                $('html, body').animate({ scrollTop: $(this.hash).offset().top }, 1200);
            });
            //通过修改样式来显示不同的星级
            $("ul.rating li a").click(function() {
                var title = $(this).attr("title");

                $("input[name='entity.Rating']").attr("value", title);
                var cl = $(this).parent().attr("class");
                $(this).parent().parent().removeClass().addClass("rating " + cl + "star");
                $(this).blur(); //去掉超链接的虚线框
                return false;
            });

            $('#fReview').ajaxForm({
                success: function(r, s) {
                    alert('@(isCN?"提交成功！":"Success,Thank you!")');
                },
                beforeSubmit: function(formData, jqForm, options) {
                    // fieldValue 是表单插件的一个方法，它能找出表单中的元素的值，返回一个集合。
                    if ($("input[name='entity.Rating']").val() == '') {
                        alert('@(isCN ? "请给商品评分" : "Please give goods")');
                        jqForm.submit(function() { return false; });
                        
                    }
                    if ($("input[name='entity.Name']").val() == '') {
                        alert('@(isCN ? "请输入您的大名" : "Please enter your name")');
                        jqForm.submit(function () { return false; });
                    }
                    if ($("input[name='entity.Email']").val() == '') {
                        alert('@(isCN ? "请输入您的邮件" : "Please enter your email")');
                        jqForm.submit(function () { return false; });
                    }
                    if ($("input[name='entity.Content']").val() == '') {
                        alert('@(isCN ? "请输入您的评价" : "Please enter your content")');
                        jqForm.submit(function () { return false; });
                    }
                    var queryString = $.param(formData); //组装数据
                    return true;
                } // 提交前，验证
            });
        });

    </script>
}
<!-- start main -->
    <div class="main_bg">
        <div class="wrap">
            <div class="main"
                <!-- start content -->
                <div class="single">
                    <!-- start span1_of_1 -->
                    <div class="left_content">
                        <div class="span1_of_1">
                            <!-- start product_slider -->
                            <div class="product-view">
                                <div class="product-essential">
                                    <div class="product-img-box">
                                        <div class="more-views" style="float: left;">
                                            <div class="more-views-container">
                                                <ul>
                                                    <li>
                                                        <a class="cs-fancybox-thumbs" data-fancybox-group="thumb" style="width: 64px; height: 85px;" href="" title="" alt="">
                                                            <img src="" src_main="" title="" alt="" /></a>
                                                    </li>
                                                    <li>
                                                        <a class="cs-fancybox-thumbs" data-fancybox-group="thumb" style="width: 64px; height: 85px;" href="" title="" alt="">
                                                            <img src="" src_main="" title="" alt="" /></a>
                                                    </li>
                                                    <li>
                                                        <a class="cs-fancybox-thumbs" data-fancybox-group="thumb" style="width: 64px; height: 85px;" href="" title="" alt="">
                                                            <img src="" src_main="" title="" alt="" /></a>
                                                    </li>
                                                    <li>
                                                        <a class="cs-fancybox-thumbs" data-fancybox-group="thumb" style="width: 64px; height: 85px;" href="" title="" alt="">
                                                            <img src="" src_main="" title="" alt="" /></a>
                                                    </li>
                                                    <li>
                                                        <a class="cs-fancybox-thumbs" data-fancybox-group="thumb" style="width: 64px; height: 85px;" href="" title="" alt="">
                                                            <img src="" src_main="" title="" alt="" /></a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="product-image">
                                            <a class="cs-fancybox-thumbs cloud-zoom" 
                                               rel="adjustX:30,adjustY:0,
                                                position:'right',
                                                tint:'#202020',
                                                tintOpacity:0.5,
                                                smoothMove:2,
                                                showTitle:true,
                                                titleOpacity:0.5" 
                                                data-fancybox-group="thumb" 
                                                href="@a.PImagea" 
                                                title="@a.Name" 
                                                alt="@a.Description">
                                                <img src="@a.PImagea" alt="@a.Name" title="@a.Description" />
                                            </a>
                                        </div>
                                        <script type="text/javascript">
                                            var prodGallery = jQblvg.parseJSON('@Html.Raw(this.ViewData["pimages"].ToString())'),
                                                gallery_elmnt = jQblvg('.product-img-box'),
                                                galleryObj = new Object(),
                                                gallery_conf = new Object();
                                                gallery_conf.moreviewitem = '<a class="cs-fancybox-thumbs" data-fancybox-group="thumb" style="width:64px;height:85px;" href=""  title="" alt=""><img src="" src_main="" width="64" height="85" title="" alt="" /></a>';
                                                gallery_conf.animspeed = 200;
                                                jQblvg(document).ready(function () {
                                                    galleryObj[1] = new prodViewGalleryForm(prodGallery, 'prod_1', gallery_elmnt, gallery_conf, '.product-image', '.more-views', 'http:');
                                                    jQblvg('.product-image .cs-fancybox-thumbs').absoluteClick();
                                                    jQblvg('.cs-fancybox-thumbs').fancybox({
                                                        prevEffect: 'none',
                                                        nextEffect: 'none',
                                                        closeBtn: true,
                                                        arrows: true,
                                                        nextClick: true,
                                                        helpers: {
                                                            thumbs: {
                                                                width: 64,
                                                                height: 85,
                                                                position: 'bottom'
                                                            }
                                                        }
                                                    });
                                                jQblvg('#wrap').css('z-index', '100');
                                                jQblvg('.more-views-container').elScroll({ type: 'vertical', elqty: 4, btn_pos: 'border', scroll_speed: 400 });

                                            });

                                            function initGallery(a, b, element) {
                                                galleryObj[a] = new prodViewGalleryForm(prods, b, gallery_elmnt, gallery_conf, '.product-image', '.more-views', '');
                                            };
                                        </script>
                                    </div>
                                </div>
                            </div>
                            <!-- end product_slider -->
                        </div>
                        <!-- start span1_of_1 -->
                        <div class="span1_of_1_des">
                            <div class="desc1">
                                <h3>@(isCN?a.Name:a.NameEn)</h3>
                                <p>@(isCN?a.Description:a.DescriptionEn)</p>
                                <h5></h5>
                                <div class="available">
                                    <h4></h4>
                                    <div class="btn_form">
                                        <form action="@a.BuyLink">
                                            <input type="submit" value="@(isCN?"去购":"Go Buy")"/>
                                        </form>
                                    </div>
                                    <div class="clear"></div>
                                </div>
                                <div class="share-desc">
                                    <div class="share">
                                        <h4>@(isCN?"精品宝贝要分享":"Share")</h4>
                                        <ul class="share_nav">
                                            <li><a href="#">
                                                <img src="/images/facebook.png" title="facebook"></a></li>
                                            <li><a href="#">
                                                <img src="/images/twitter.png" title="Twiiter"></a></li>
                                            <li><a href="#">
                                                <img src="/images/rss.png" title="Rss"></a></li>
                                            <li><a href="#">
                                                <img src="/images/gpluse.png" title="Google+"></a></li>
                                        </ul>
                                    </div>
                                    <div class="clear"></div>
                                </div>
                            </div>
                        </div>
                        <div class="clear"></div>
                        <!-- start tabs -->
                        <div class="tab">
                            <div class="tab_menu">
                                <ul>
                                    <li class="selected">@(isCN?"宝贝详情":"Detail")</li>
                                    <li >@(isCN?"商品留言":"Leave word")</li>
                                </ul>
                            </div>
                            <div class="tab_box">
                                <div  style="padding: 5%;">
                                   @(isCN?Html.Raw(a.Content):Html.Raw(a.ContentEn))
                                </div>
                                <div class="hide">
                                    <div class="contact-form" style="padding: 5%;">
                                        <form id="fReview" action="/Article/Review" method="post">
                                            <div>
                                                <span>
                                                    <label>@(isCN?"给商品评分":"Grade")</label></span>
                                                <span>
                                                    <ul class="rating nostar">
                                                        <li class="one"><a href="#" title="1">1</a></li>
                                                        <li class="two"><a href="#" title="2">2</a></li>
                                                        <li class="three"><a href="#" title="3">3</a></li>
                                                        <li class="four"><a href="#" title="4">4</a></li>
                                                        <li class="five"><a href="#" title="5">5</a></li>
                                                    </ul>
                                                    <input name="articleId" value="@a.ID" type="hidden"/>
                                                    <input name="entity.Rating" type="hidden" />
                                                </span>
                                            </div>
                                            <div>
                                                <span>
                                                    <label>@(isCN?"昵称":"Name")</label></span>
                                                <span>
                                                    <input name="entity.Name" type="text" class="textbox"></span>
                                            </div>
                                            <div>
                                                <span>
                                                    <label>@(isCN?"电子邮件":"E-mail")</label></span>
                                                <span>
                                                    <input name="entity.Email" type="text" class="textbox"></span>
                                            </div>
                                            <div>
                                                <span>
                                                    <label>@(isCN?"内容":"Subject")</label></span>
                                                <span>
                                                    <textarea name="entity.Content"></textarea></span>
                                            </div>
                                            <div>
                                                <span>
                                                    <input type="submit" id="bbbb" class="" value="@(isCN?"感谢您":"Submit us")"></span>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="clear"></div>
                                </div>
                            </div>
                        </div>
                        <!-- end tabs -->
                    </div>
                    <!-- start sidebar -->
                    <div class="left_sidebar">
                        <div class="sellers">
                            <h4>@(isCN?a.Category.Forum.Name:a.Category.Forum.NameEn)</h4>
                            <div class="single-nav">
                                <ul>
                                    @{
                                        foreach (var c in (this.ViewData["CategoryList"] as IEnumerable<Domain.Category>))
                                        {
                                            <li><a href="/@a.Category.Forum.ID/PList.html?cid=@c.ID">@(isCN?c.Name:c.NameEn)</a></li>
                                        }
                                    }
                                </ul>
                            </div>
                            <div class="brands">
                                <h1>@(isCN?"热点商品":"Hot Products")</h1>
                                @{
                                foreach (var p in (this.ViewData["hotp"] as IEnumerable<Domain.Article>))
                                {
                                <div class="field">
                                    <a href="/Article/Product/@p.ID">
                                        <img src="@p.PImagea" alt="" />
                                        <h3>@(isCN?p.Name:p.NameEn)</h3>
                                    </a>
                                </div>
                                }
                            }
                            </div>
                            <div class="banner-wrap bottom_banner color_link">
                                <a href="#" class="main_link">
                                    <figure>
                                        <img src="/images/delivery.png" alt="">
                                    </figure>
                                    <h5><span>Free Shipping</span><br>
                                        on orders over $99.</h5>
                                    <p>This offer is valid on all our store items.</p>
                                </a>
                            </div>
                            
                        </div>
                    </div>
                    <!-- end sidebar -->
                    <div class="clear"></div>
                </div>
                <!-- end content -->
            </div>
        </div>
    </div>